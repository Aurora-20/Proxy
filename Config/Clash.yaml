port: 7890 # HTTP ä»£ç†ç«¯å£
socks-port: 7891 # Socks ç«¯å£
redir-port: 7892 # Redir ç«¯å£
mixed-port: 7893 # æ··åˆç«¯å£
allow-lan: true # å…è®¸å±€åŸŸç½‘è¿æ¥
bind-address: "*" # åœ°å€ç»‘å®š
mode: rule # è§„åˆ™æ¨¡å¼
log-level: info # æ—¥å¿—çº§åˆ«
ipv6: false # IPV6å¼€å…³
external-controller: 127.0.0.1:9090

geodata-mode: true
geox-url:
  geoip: "https://github.com/Masaiki/GeoIP2-CN/raw/release/Country.mmdb"

dns:
  enable: true # ä¸ä½¿ç”¨ç³»ç»Ÿ DNS
  ipv6: false # å…³é—­ IPV6
  listen: 0.0.0.0:53 # dns ç›‘å¬
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - localhost.ptlogin2.qq.com
    - +.srv.nintendo.net
    - +.stun.playstation.net
    - +.msftconnecttest.com
    - +.msftncsi.com
    - +.xboxlive.com
    - msftconnecttest.com
    - xbox.*.microsoft.com
    - "*.battlenet.com.cn"
    - "*.battlenet.com"
    - "*.blzstatic.cn"
    - "*.battle.net"
  nameserver: # é»˜è®¤ DNS æœåŠ¡
    - 223.5.5.5
    - 119.29.29.29
  fallback: # å›½å¤– DNS æœåŠ¡å™¨
    - https://cloudflare-dns.com/dns-query
    - https://dns.google/dns-query
    - https://dns.alidns.com/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

######### é”šç‚¹ start #######
pr:
  &proxy {
    type: select,
    proxies:
      [
        ğŸ‡­ğŸ‡° Hong Kong,
        ğŸ‡¯ğŸ‡µ Japan,
        ğŸ‡ºğŸ‡¸ United States,
        ğŸ‡¹ğŸ‡¼ Taiwan,
        ğŸ‡¸ğŸ‡¬ Singapore,
        DIRECT,
      ],
  }
p:
  &p {
    type: http,
    interval: 3600,
    health-check:
      {
        enable: true,
        url: https://www.apple.com/library/test/success.html,
        interval: 300,
      },
  }
auto:
  &auto {
    type: url-test,
    lazy: true,
    url: https://www.apple.com/library/test/success.html,
    interval: 600,
    use: [Subscribe],
  }
use: &use { type: select, use: [Subscribe] }
load-balance:
  &load-balance {
    type: load-balance,
    use: [Subscribe],
    url: https://www.apple.com/library/test/success.html,
    interval: 600,
    strategy: round-robin,
  }
c: &classical { type: http, behavior: classical, interval: 86400 }
d: &domain { type: http, behavior: domain, interval: 86400 }
i: &ipcidr { type: http, behavior: ipcidr, interval: 86400 }
######### é”šç‚¹ end #######

proxy-providers:
  Subscribe:
    <<: *p
    url: https://www.baidu.com
    path: ./proxy_providers/tmp.yaml
proxies: null
proxy-groups:
  [
    { name: ğŸš€ Default, <<: *proxy },
    { name: â¬ Downloads, <<: *use, filter: "0.[0-9]+" },
    { name: ğŸ‡­ğŸ‡° Hong Kong, <<: *auto, filter: "(?i)æ¸¯|hk|hongkong|hong kong" },
    { name: ğŸ‡¯ğŸ‡µ Japan, <<: *auto, filter: "(?i)æ—¥æœ¬|jp|japan" },
    { name: ğŸ‡¹ğŸ‡¼ Taiwan, <<: *auto, filter: "(?i)å°|tw|taiwan" },
    {
      name: ğŸ‡ºğŸ‡¸ United States,
      <<: *auto,
      filter: "(?i)ç¾|unitedstates|united states",
    },
    { name: ğŸ‡¸ğŸ‡¬ Singapore, <<: *auto, filter: "(?i)(æ–°|sg|singapore)" },
    { name: ğŸ”® Load Balance, <<: *auto, filter: "^V|E" },
  ]
rule-providers:
  Downloads:
    {
      <<: *classical,
      url: https://raw.tuu.cat/blackmatrix7/ios_rule_script/master/rule/Clash/Download/Download.yaml,
      path: ./ruleset/Downloads.yaml,
    }
  Telegram:
    {
      <<: *classical,
      url: https://raw.tuu.cat/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml,
      path: ./ruleset/Telegram.yaml,
    }
  Emby:
    {
      <<: *classical,
      url: https://raw.tuu.cat/Aurora-20/Proxy/main/Rules/Clash/Emby/Emby.yaml,
      path: ./ruleset/Emby.yaml,
    }
  DMCA:
    {
      <<: *classical,
      url: https://raw.tuu.cat/Aurora-20/Proxy/main/Rules/Clash/DMCA/DMCA.yaml,
      path: ./ruleset/DMCA.yaml,
    }
rules:
  - GEOIP,CN,DIRECT
  - RULE-SET,Telegram,ğŸ‡¸ğŸ‡¬ Singapore
  - RULE-SET,Downloads,â¬ Downloads
  - RULE-SET,Emby,â¬ Downloads
  - RULE-SET,DMCA,ğŸ”® Load Balance
  - MATCH,ğŸš€ Default
